(this["webpackJsonpmy-task-shadow"]=this["webpackJsonpmy-task-shadow"]||[]).push([[0],{160:function(e,t,a){},221:function(e,t,a){e.exports=a(445)},230:function(e,t,a){},398:function(e,t,a){},438:function(e,t,a){},439:function(e,t,a){},440:function(e,t,a){},445:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(4),i=a.n(o),l=a(24),d=a(19),c=a(202),s=a(116),u=a(104),p=a(40),b=a(453),f=a(458),g=a(459),m=Object(g.a)("AXIOS_GETREQUEST_ERROR"),E=Object(b.a)(Object(u.a)({},Object(f.a)(m),(function(e,t){return t.payload.response?Object(p.a)({},e,{error:!0,loading:!1,successMessage:null,statusCode:t.payload.response.status}):Object(p.a)({},e,{error:!0,loading:!1,statusCode:null,successMessage:null})})),{loading:!1,error:!1,loadingRequestCount:0,errorMessage:null,successMessage:null}),O=a(157),h=window.localStorage.getItem("my-task-mirror-state"),y=[{id:"1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed",listTilte:"TODO",cards:[{id:"1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4eed",cardTitle:"Book Hotel",cardDes:"Don't sleep on footpath"},{id:"1b9d6bcd-bbfd-4b2d-9b5d-ab8dfdbd4eed",cardTitle:"Book Bus",cardDes:"Can't Hire Cab"}]},{id:"1b9b6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed",listTilte:"PROGRESS",cards:[{id:"1b8d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4eed",cardTitle:"Meeting",cardDes:"Goto Meeting"},{id:"1b9d7bcd-bbfd-4b2d-9b5d-ab8dfdbd4eed",cardTitle:"Read Book",cardDes:"Continous Learning"}]}],v={data:h?JSON.parse(h):y},T=Object(b.a)({BOARD_RESET_STATE:function(e,t){return Object(p.a)({},e,{},t.payload)},BOARD_ADDLIST_STATE:function(e,t){var a={id:t.payload.id,listTilte:t.payload.listTilte,cards:[]},r=[].concat(Object(O.a)(e.data),[a]);return window.localStorage.setItem("my-task-mirror-state",JSON.stringify(r)),{data:r}},BOARD_ADDCARD_STATE:function(e,t){var a=e.data.find((function(e){return e.id===t.payload.listId}));if(window.console.log(a,"dasdas",t),a){var r={id:t.payload.id,cardTitle:t.payload.cardTitle,cardDes:t.payload.cardDes};a.cards=[].concat(Object(O.a)(a.cards),[r]);var n=e.data.map((function(e){return e.id===t.payload.listId?a:e}));return window.localStorage.setItem("my-task-mirror-state",JSON.stringify(n)),{data:n}}},BOARD_CLEAR_STATE:function(){return window.localStorage.setItem("my-task-mirror-state",""),{data:[]}},BOARD_SET_DEFAULT_STATE:function(){return{data:y}}},v),D=a(25),w=(a(230),a(34)),j=a(35),A=a(38),C=a(36),S=a(39),I=a(451),k=a(452),R=(a(160),a(449)),_=a(159),L=a(70),B=a(203),M=a(150),N=a(58),x=a.n(N),P=new(a(252))(x.a,{delayResponse:200}),F=Object(g.a)("BOARD_RESET_STATE"),H=Object(g.a)("BOARD_ADDLIST_STATE"),J=Object(g.a)("BOARD_ADDCARD_STATE"),q=Object(g.a)("BOARD_CLEAR_STATE"),U=Object(g.a)("BOARD_SET_DEFAULT_STATE"),W=[["GET","/board/data",200,{data:[]}],["POST","/board/list/add",200],["POST","/board/card/add",200],["POST","/board/delete",200],["POST","/board/reset",200]];P.onAny().reply((function(e){var t=W.shift(),a=Object(B.a)(t),r=a[0],n=a[1],o=a.slice(2);return e.url===n&&e.method.toUpperCase()===r?o:[200,{}]}));var z=a(448),G=a(454),X=a(455),K=a(50),Q=a(456),V=a(446),$=a(447),Y=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(A.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(n)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){window.console.log(t,"lll"),e||(console.log("Received values of form: ",t),"Card"===a.props.itemType?a.props.addNewCard(t.title,t.des,a.props.listId):a.props.addNewList(t.title,t.des),a.setState({visible:!1}))})),a.props.form.resetFields()},a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a="Card"===this.props.itemType?n.a.createElement(G.a.Item,null,t("des",{rules:[{required:!1,message:"Please input Description!"}]})(n.a.createElement(X.a.TextArea,{rows:2,placeholder:"Description"}))):"";return n.a.createElement("div",null,n.a.createElement("center",null,n.a.createElement(K.a,{type:"primary",size:"default",icon:"plus-circle",style:{margin:"10px"},onClick:this.showModal},"Add New ".concat(this.props.itemType))),n.a.createElement(Q.a,{title:"Add ".concat(this.props.itemType),visible:this.state.visible,onCancel:function(){return e.setState({visible:!1})},footer:null},n.a.createElement(G.a,{onSubmit:this.handleSubmit},n.a.createElement(G.a.Item,null,t("title",{rules:[{required:!0,message:"Please input title"}]})(n.a.createElement(X.a,{placeholder:"Title"}))),a,n.a.createElement(G.a.Item,null,n.a.createElement(V.a,{gutter:[0,3]},n.a.createElement($.a,{span:16}),n.a.createElement($.a,{span:4,style:{marginRight:"5"}},n.a.createElement(K.a,{type:"primary",onClick:function(){return e.setState({visible:!1})}},"Cancel")),n.a.createElement($.a,{span:4},n.a.createElement(K.a,{type:"primary",htmlType:"submit"},"Add")))))))}}]),t}(r.Component),Z=G.a.create()(Y),ee=Object(d.b)((function(e){return{boardData:e.board.data}}),(function(e){return{addNewList:function(t){return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(M.uuid)();return function(a){x.a.post("/board/list/add").then((function(r){a(H({listTilte:e,id:t}))})).catch((function(r){a(H({listTilte:e,id:t}))}))}}(t))},addNewCard:function(t,a,r){return e(function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(M.uuid)();return function(n){window.console.log("comming addNew",e,t,a);x.a.post("/board/card/add").then((function(o){window.console.log("comming res addNew",e,t,a),n(J({cardTitle:e,cardDes:t,listId:a,id:r}))})).catch((function(o){n(J({cardTitle:e,cardDes:t,listId:a,id:r})),n(m(o))}))}}(t,a,r))}}}))(Z),te=(a(398),function(e,t,a){var r=Array.from(e),n=r.splice(t,1),o=Object(_.a)(n,1)[0];return r.splice(a,0,o),r}),ae=function(e,t){return Object(p.a)({userSelect:"none",padding:20,margin:"0 0 ".concat(10,"px 0"),background:e?"lightgreen":"white"},t)},re=function(e){return{background:e?"green":"lightgrey",padding:10,width:200,minHeight:200,border:"0.5px solid",wordWrap:"break-word"}},ne=function(e,t,a,r){var n=Array.from(e),o=Array.from(t),i=n.splice(a.index,1),l=Object(_.a)(i,1)[0];o.splice(r.index,0,l);var d={};return d[a.droppableId]=n,d[r.droppableId]=o,d},oe=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(A.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(n)))).state={},a.getCardsArrayOfAList=function(e){return a.props.boardData.find((function(t){return t.id===e}))},a.onDragListEnd=function(e){window.console.log(e,"ada");var t=e.source,r=e.destination;if(r&&t.droppableId===r.droppableId){var n=te(a.props.boardData,t.index,r.index);a.props.reorderCurrList(n)}},a.onDragEndHandler=function(e){window.console.log(e,"arrr");var t=e.destination,r=e.type;t&&("CARD"===r?a.onCardDragEnd(e):"LIST"===r&&a.onDragListEnd(e))},a.onCardDragEnd=function(e){var t=e.source,r=e.destination;if(window.console.log(e),r)if(t.droppableId===r.droppableId){window.console.log(a.getCardsArrayOfAList(t.droppableId));var n=a.getCardsArrayOfAList(t.droppableId),o=te(a.getCardsArrayOfAList(t.droppableId)?a.getCardsArrayOfAList(t.droppableId).cards:[],t.index,r.index),i=Object(p.a)({},n,{cards:o});a.props.reorderCurrList(a.props.boardData.map((function(e){return e.id===t.droppableId?i:e})))}else{var l=a.getCardsArrayOfAList(t.droppableId),d=a.getCardsArrayOfAList(r.droppableId),c=ne(l.cards,d.cards,t,r),s=Object(p.a)({},l,{cards:c["".concat(t.droppableId)]}),u=Object(p.a)({},d,{cards:c["".concat(r.droppableId)]});a.props.reorderCurrList(a.props.boardData.map((function(e){return e.id===t.droppableId?s:e.id===r.droppableId?u:e})))}},a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(L.a,{onDragEnd:this.onDragEndHandler},n.a.createElement(L.c,{droppableId:"droppable",direction:"horizontal",type:"LIST"},(function(t,a){return n.a.createElement("div",{ref:t.innerRef,style:(r=a.isDraggingOver,{background:r?"green":"lightgreen",padding:10,display:"flex",overflow:"auto"})},e.props.boardData.map((function(e,t){return n.a.createElement(L.b,{key:e.id,draggableId:e.id,index:t},(function(t,a){return n.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:ae(a.isDragging,t.draggableProps.style)}),n.a.createElement(L.c,{droppableId:e.id,type:"CARD"},(function(t,a){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{ref:t.innerRef,style:re(a.isDraggingOver)},n.a.createElement("span",null,n.a.createElement("center",null,e.listTilte)),e.cards.map((function(e,t){return n.a.createElement(L.b,{key:e.id,draggableId:e.id,index:t},(function(t,a){return n.a.createElement(z.a,{content:e.cardDes,title:e.cardTitle,trigger:"click"},n.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:ae(a.isDragging,t.draggableProps.style)}),n.a.createElement("span",null,n.a.createElement("center",null,e.cardTitle))))}))})),t.placeholder),n.a.createElement(ee,{itemType:"Card",listId:e.id}))})))}))})),t.placeholder,n.a.createElement(ee,{itemType:"List"}));var r}))))}}]),t}(r.Component),ie=Object(d.b)((function(e){return{boardData:e.board.data}}),(function(e){return{reorderCurrList:function(t){return e((a=t,function(e){return e(F({data:a})),window.localStorage.setItem("my-task-mirror-state",JSON.stringify(a)),Promise.resolve()}));var a}}}))(oe),le=a(457),de=a(7),ce=le.a.SubMenu,se=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(A.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(n)))).state={current:"list"},a.handleClick=function(e){a.setState({current:e.key})},a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(le.a,{theme:"dark",onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal"},n.a.createElement(ce,{title:n.a.createElement("span",null,n.a.createElement(de.a,{type:"book"}),"Task Mirror")}),n.a.createElement(ce,{title:n.a.createElement("span",{onClick:function(){return e.props.clearBoardData()}},n.a.createElement(de.a,{type:"delete"}),"Clear Board")}),n.a.createElement(ce,{title:n.a.createElement("span",{onClick:function(){return e.props.resetBoardData()}},n.a.createElement(de.a,{type:"undo"}),"Restore Default")})))}}]),t}(n.a.Component),ue=Object(d.b)((function(e){return{boardData:e.board.data}}),(function(e){return{clearBoardData:function(){return e((function(e){x.a.post("/board/delete").then((function(t){e(q())})).catch((function(t){e(q()),e(m(t))}))}))},resetBoardData:function(){return e((function(e){x.a.post("/board/reset").then((function(t){e(U())})).catch((function(t){e(U()),e(m(t))}))}))}}}))(se),pe=(a(438),R.a.Content),be=function(e){function t(){return Object(w.a)(this,t),Object(A.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return this.renderWhenLoggedIn()}},{key:"renderWhenLoggedIn",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(R.a,null,n.a.createElement(ue,null),n.a.createElement(R.a,null,n.a.createElement(pe,{style:{backgroundColor:"lightgreen",height:"600px"}},n.a.createElement(ie,null)))))}}]),t}(r.Component),fe=Object(d.b)((function(e){return{}}),(function(e){return{}}))(be),ge=(a(439),function(e){return e.show?n.a.createElement("div",{styleName:"backdrop"}):null}),me=a(450),Ee=(a(440),function(){return n.a.createElement("div",null,n.a.createElement(ge,{show:!0}),n.a.createElement("div",{styleName:"spinner"},n.a.createElement(me.a,{tip:"Loading...",size:"large"})))}),Oe=(a(443),function(e){function t(){return Object(w.a)(this,t),Object(A.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.successMessage&&this.props.successMessage!==e.successMessage&&I.a.success({message:this.props.successMessage}),this.props.error&&this.props.error!==e.error)if(403===this.props.status)window.location.href="/board/",window.localStorage.clear();else{var t=null;try{t=JSON.parse(this.props.error_message)}catch(a){t=null}t?Object.keys(t).map((function(e){return k.a.error("".concat(e," : ").concat(t[e]))})):k.a.error("Something Wrong")}}},{key:"render",value:function(){var e=null;return(this.props.loading||this.props.loadingRequestCount>0)&&(e=n.a.createElement(Ee,null)),n.a.createElement("div",{styleName:"app"},n.a.createElement(s.a,null,n.a.createElement("div",null,n.a.createElement(fe,null),e)))}}]),t}(r.Component)),he=Object(d.b)((function(e){return{loading:e.global.loading,loadingRequestCount:e.global.loadingRequestCount,error:e.global.error,error_message:e.global.errorMessage,successMessage:e.global.successMessage,status:e.global.statusCode}}))(Oe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ye=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,ve=Object(D.a)(),Te=Object(l.e)(Object(l.c)({global:E,board:T}),ye(Object(l.a)(c.a)));i.a.render(n.a.createElement(s.a,null,n.a.createElement(d.a,{store:Te},n.a.createElement(he,{history:ve}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[221,1,2]]]);
//# sourceMappingURL=main.b872d147.chunk.js.map