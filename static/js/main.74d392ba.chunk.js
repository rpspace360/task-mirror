(this["webpackJsonpmy-task-shadow"]=this["webpackJsonpmy-task-shadow"]||[]).push([[0],{162:function(e,t,a){},223:function(e,t,a){e.exports=a(447)},232:function(e,t,a){},400:function(e,t,a){},440:function(e,t,a){},442:function(e,t,a){},443:function(e,t,a){},447:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(4),i=a.n(o),l=a(24),d=a(19),c=a(204),s=a(80),u=a(107),b=a(40),p=a(455),f=a(460),g=a(461),m=Object(g.a)("AXIOS_GETREQUEST_ERROR"),E=Object(p.a)(Object(u.a)({},Object(f.a)(m),(function(e,t){return t.payload.response?Object(b.a)({},e,{error:!0,loading:!1,successMessage:null,statusCode:t.payload.response.status}):Object(b.a)({},e,{error:!0,loading:!1,statusCode:null,successMessage:null})})),{loading:!1,error:!1,loadingRequestCount:0,errorMessage:null,successMessage:null}),h=a(159),O=Object(p.a)({BOARD_RESET_STATE:function(e,t){return Object(b.a)({},e,{},t.payload)},BOARD_ADDLIST_STATE:function(e,t){var a={id:t.payload.id,listTilte:t.payload.listTilte,cards:[]};return{data:[].concat(Object(h.a)(e.data),[a])}},BOARD_ADDCARD_STATE:function(e,t){var a=e.data.find((function(e){return e.id===t.payload.listId}));if(window.console.log(a,"dasdas",t),a){var r={id:t.payload.id,cardTitle:t.payload.cardTitle,cardDes:t.payload.cardDes};return a.cards=[].concat(Object(h.a)(a.cards),[r]),{data:e.data.map((function(e){return e.id===t.payload.listId?a:e}))}}},BOARD_CLEAR_STATE:function(){return{data:[]}}},{data:[{id:"1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed",listTilte:"TODO",cards:[{id:"1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4eed",cardTitle:"Book Hotel",cardDes:"Don't sleep on footpath"},{id:"1b9d6bcd-bbfd-4b2d-9b5d-ab8dfdbd4eed",cardTitle:"Book Bus",cardDes:"Can't Hire Cab"}]},{id:"1b9b6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed",listTilte:"PROGRESS",cards:[{id:"1b8d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4eed",cardTitle:"Meeting",cardDes:"Goto Meeting"},{id:"1b9d7bcd-bbfd-4b2d-9b5d-ab8dfdbd4eed",cardTitle:"Read Book",cardDes:"Continous Learning"}]}]}),y=a(25),v=(a(232),a(34)),j=a(35),T=a(38),D=a(36),w=a(39),A=a(453),C=a(454),S=(a(162),a(52)),I=a(451),k=a(160),R=a(72),_=a(205),L=a(152),B=a(58),M=a.n(B),x=new(a(254))(M.a,{delayResponse:200}),P=(Object(g.a)("BOARD_SET_STATE"),Object(g.a)("BOARD_RESET_STATE")),N=Object(g.a)("BOARD_ADDLIST_STATE"),H=Object(g.a)("BOARD_ADDCARD_STATE"),q=Object(g.a)("BOARD_CLEAR_STATE"),F=(window.localStorage.getItem("my-task-mirror-state")&&window.localStorage.getItem("my-task-mirror-state"),[["GET","/board/data",200,{data:[]}],["POST","/board/list/add",200],["POST","/board/card/add",200],["POST","/board/delete",200]]);x.onAny().reply((function(e){var t=F.shift(),a=Object(_.a)(t),r=a[0],n=a[1],o=a.slice(2);return e.url===n&&e.method.toUpperCase()===r?o:[200,{}]}));var W=a(450),z=a(456),G=a(457),U=a(51),J=a(458),X=a(448),K=a(449),Q=function(e){function t(){var e,a;Object(v.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(T.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){window.console.log(t,"lll"),e||(console.log("Received values of form: ",t),"Card"===a.props.itemType?a.props.addNewCard(t.title,t.des,a.props.listId):a.props.addNewList(t.title,t.des),a.setState({visible:!1}))})),a.props.form.resetFields()},a}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a="Card"===this.props.itemType?n.a.createElement(z.a.Item,null,t("des",{rules:[{required:!1,message:"Please input Description!"}]})(n.a.createElement(G.a.TextArea,{rows:2,placeholder:"Description"}))):"";return n.a.createElement("div",null,n.a.createElement("center",null,n.a.createElement(U.a,{type:"primary",size:"default",icon:"plus-circle",style:{margin:"10px"},onClick:this.showModal},"Add New ".concat(this.props.itemType))),n.a.createElement(J.a,{title:"Add ".concat(this.props.itemType),visible:this.state.visible,onCancel:function(){return e.setState({visible:!1})},footer:null},n.a.createElement(z.a,{onSubmit:this.handleSubmit},n.a.createElement(z.a.Item,null,t("title",{rules:[{required:!0,message:"Please input title"}]})(n.a.createElement(G.a,{placeholder:"Title"}))),a,n.a.createElement(z.a.Item,null,n.a.createElement(X.a,{gutter:[0,3]},n.a.createElement(K.a,{span:16}),n.a.createElement(K.a,{span:4,style:{marginRight:"5"}},n.a.createElement(U.a,{type:"primary",onClick:function(){return e.setState({visible:!1})}},"Cancel")),n.a.createElement(K.a,{span:4},n.a.createElement(U.a,{type:"primary",htmlType:"submit"},"Add")))))))}}]),t}(r.Component),V=z.a.create()(Q),$=Object(d.b)((function(e){return{boardData:e.board.data}}),(function(e){return{addNewList:function(t){return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(L.uuid)();return function(a){M.a.post("/board/list/add").then((function(r){a(N({listTilte:e,id:t}))})).catch((function(r){a(N({listTilte:e,id:t}))}))}}(t))},addNewCard:function(t,a,r){return e(function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(L.uuid)();return function(n){window.console.log("comming addNew",e,t,a);M.a.post("/board/card/add").then((function(o){window.console.log("comming res addNew",e,t,a),n(H({cardTitle:e,cardDes:t,listId:a,id:r}))})).catch((function(o){n(H({cardTitle:e,cardDes:t,listId:a,id:r})),n(m(o))}))}}(t,a,r))}}}))(V),Y=(a(400),function(e,t,a){var r=Array.from(e),n=r.splice(t,1),o=Object(k.a)(n,1)[0];return r.splice(a,0,o),r}),Z=function(e,t){return Object(b.a)({userSelect:"none",background:e?"lightgreen":"white"},t)},ee=function(e){return{background:e?"green":"lightgrey",border:"0.5px solid",wordWrap:"break-word"}},te=function(e,t,a,r){var n=Array.from(e),o=Array.from(t),i=n.splice(a.index,1),l=Object(k.a)(i,1)[0];o.splice(r.index,0,l);var d={};return d[a.droppableId]=n,d[r.droppableId]=o,d},ae=function(e){function t(){var e,a;Object(v.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(T.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).state={},a.getCardsArrayOfAList=function(e){return a.props.boardData.find((function(t){return t.id===e}))},a.onDragListEnd=function(e){window.console.log(e,"ada");var t=e.source,r=e.destination;if(r&&t.droppableId===r.droppableId){var n=Y(a.props.boardData,t.index,r.index);a.props.reorderCurrList(n)}},a.onDragEndHandler=function(e){window.console.log(e,"arrr");var t=e.destination,r=e.type;t&&("CARD"===r?a.onCardDragEnd(e):"LIST"===r&&a.onDragListEnd(e))},a.onCardDragEnd=function(e){var t=e.source,r=e.destination;if(window.console.log(e),r)if(t.droppableId===r.droppableId){window.console.log(a.getCardsArrayOfAList(t.droppableId));var n=a.getCardsArrayOfAList(t.droppableId),o=Y(a.getCardsArrayOfAList(t.droppableId)?a.getCardsArrayOfAList(t.droppableId).cards:[],t.index,r.index),i=Object(b.a)({},n,{cards:o});a.props.reorderCurrList(a.props.boardData.map((function(e){return e.id===t.droppableId?i:e})))}else{var l=a.getCardsArrayOfAList(t.droppableId),d=a.getCardsArrayOfAList(r.droppableId),c=te(l.cards,d.cards,t,r),s=Object(b.a)({},l,{cards:c["".concat(t.droppableId)]}),u=Object(b.a)({},d,{cards:c["".concat(r.droppableId)]});a.props.reorderCurrList(a.props.boardData.map((function(e){return e.id===t.droppableId?s:e.id===r.droppableId?u:e})))}},a}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(R.a,{onDragEnd:this.onDragEndHandler},n.a.createElement(R.c,{droppableId:"droppable",direction:"horizontal",type:"LIST"},(function(t,a){return n.a.createElement("div",{ref:t.innerRef,style:(r=a.isDraggingOver,{background:r?"green":"lightgreen",display:"flex"})},e.props.boardData.map((function(e,t){return n.a.createElement(R.b,{key:e.id,draggableId:e.id,index:t},(function(t,a){return n.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Z(a.isDragging,t.draggableProps.style)}),n.a.createElement(R.c,{droppableId:e.id,type:"CARD"},(function(a,r){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{ref:a.innerRef,style:ee(r.isDraggingOver)},n.a.createElement("span",null,n.a.createElement("center",null,e.listTilte)),e.cards.map((function(e,t){return n.a.createElement(R.b,{key:e.id,draggableId:e.id,index:t},(function(t,a){return n.a.createElement(W.a,{content:e.cardDes,title:e.cardTitle,trigger:"click"},n.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Z(a.isDragging,t.draggableProps.style)}),n.a.createElement("span",null,n.a.createElement("center",null,e.cardTitle))))}))})),t.placeholder),n.a.createElement($,{itemType:"Card",listId:e.id}))})))}))})),t.placeholder,n.a.createElement($,{itemType:"List"}));var r}))))}}]),t}(r.Component),re=Object(d.b)((function(e){return{boardData:e.board.data}}),(function(e){return{reorderCurrList:function(t){return e((a=t,function(e){return e(P({data:a})),Promise.resolve()}));var a}}}))(ae),ne=a(459),oe=a(7),ie=ne.a.SubMenu,le=function(e){function t(){var e,a;Object(v.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(T.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).state={current:"list"},a.handleClick=function(e){a.setState({current:e.key})},a}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(ne.a,{theme:"dark",onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal"},n.a.createElement(ie,{title:n.a.createElement("span",null,n.a.createElement(oe.a,{type:"book"}),"Task Mirror")}),n.a.createElement(ie,{title:n.a.createElement("span",{onClick:function(){return e.props.clearBoardData()}},n.a.createElement(oe.a,{type:"delete"}),"Clear Board")})))}}]),t}(n.a.Component),de=Object(d.b)((function(e){return{boardData:e.board.data}}),(function(e){return{clearBoardData:function(){return e((function(e){M.a.post("/board/delete").then((function(t){e(q())})).catch((function(t){e(q()),e(m(t))}))}))}}}))(le),ce=(a(440),I.a.Header,I.a.Content),se=(I.a.Footer,I.a.Sider,function(e){function t(){return Object(v.a)(this,t),Object(T.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return this.renderWhenLoggedIn()}},{key:"renderWhenLoggedIn",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,null,n.a.createElement(de,null),n.a.createElement(I.a,null,n.a.createElement(ce,{style:{backgroundColor:"lightgreen",height:"600px"}},n.a.createElement(S.d,null,n.a.createElement(S.a,{exact:!0,from:"/",to:"/board/"}),n.a.createElement(S.a,{exact:!0,from:"/login",to:"/board/"}),n.a.createElement(S.b,{path:"/board/",exact:!0,component:re}))))))}}]),t}(r.Component)),ue=Object(d.b)((function(e){return{}}),(function(e){return{}}))(se),be=(a(442),function(e){return e.show?n.a.createElement("div",{styleName:"backdrop"}):null}),pe=a(452),fe=(a(443),function(){return n.a.createElement("div",null,n.a.createElement(be,{show:!0}),n.a.createElement("div",{styleName:"spinner"},n.a.createElement(pe.a,{tip:"Loading...",size:"large"})))}),ge=(a(446),function(e){function t(){return Object(v.a)(this,t),Object(T.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.successMessage&&this.props.successMessage!==e.successMessage&&A.a.success({message:this.props.successMessage}),this.props.error&&this.props.error!==e.error)if(403===this.props.status)window.location.href="/board/",window.localStorage.clear();else{var t=null;try{t=JSON.parse(this.props.error_message)}catch(a){t=null}t?Object.keys(t).map((function(e){return C.a.error("".concat(e," : ").concat(t[e]))})):C.a.error("Something Wrong")}}},{key:"render",value:function(){var e=null;return(this.props.loading||this.props.loadingRequestCount>0)&&(e=n.a.createElement(fe,null)),n.a.createElement("div",{styleName:"app"},n.a.createElement(s.a,null,n.a.createElement("div",null,n.a.createElement(ue,null),e)))}}]),t}(r.Component)),me=Object(d.b)((function(e){return{loading:e.global.loading,loadingRequestCount:e.global.loadingRequestCount,error:e.global.error,error_message:e.global.errorMessage,successMessage:e.global.successMessage,status:e.global.statusCode}}))(ge);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,he=Object(y.a)(),Oe=Object(l.e)(Object(l.c)({global:E,board:O}),Ee(Object(l.a)(c.a)));i.a.render(n.a.createElement(s.a,null,n.a.createElement(d.a,{store:Oe},n.a.createElement(me,{history:he}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[223,1,2]]]);
//# sourceMappingURL=main.74d392ba.chunk.js.map