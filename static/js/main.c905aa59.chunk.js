(this["webpackJsonpmy-task-shadow"]=this["webpackJsonpmy-task-shadow"]||[]).push([[0],{162:function(e,t,a){},223:function(e,t,a){e.exports=a(447)},232:function(e,t,a){},400:function(e,t,a){},440:function(e,t,a){},442:function(e,t,a){},443:function(e,t,a){},447:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(4),i=a.n(o),l=a(24),c=a(19),d=a(204),s=a(80),u=a(107),p=a(40),b=a(455),f=a(460),m=a(461),g=Object(m.a)("AXIOS_GETREQUEST_ERROR"),E=Object(b.a)(Object(u.a)({},Object(f.a)(g),(function(e,t){return t.payload.response?Object(p.a)({},e,{error:!0,loading:!1,successMessage:null,statusCode:t.payload.response.status}):Object(p.a)({},e,{error:!0,loading:!1,statusCode:null,successMessage:null})})),{loading:!1,error:!1,loadingRequestCount:0,errorMessage:null,successMessage:null}),h=a(159),O=window.localStorage.getItem("my-task-mirror-state"),y=[{id:"1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed",listTilte:"TODO",cards:[{id:"1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4eed",cardTitle:"Book Hotel",cardDes:"Don't sleep on footpath"},{id:"1b9d6bcd-bbfd-4b2d-9b5d-ab8dfdbd4eed",cardTitle:"Book Bus",cardDes:"Can't Hire Cab"}]},{id:"1b9b6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed",listTilte:"PROGRESS",cards:[{id:"1b8d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4eed",cardTitle:"Meeting",cardDes:"Goto Meeting"},{id:"1b9d7bcd-bbfd-4b2d-9b5d-ab8dfdbd4eed",cardTitle:"Read Book",cardDes:"Continous Learning"}]}],v={data:O?JSON.parse(O):y},T=Object(b.a)({BOARD_RESET_STATE:function(e,t){return Object(p.a)({},e,{},t.payload)},BOARD_ADDLIST_STATE:function(e,t){var a={id:t.payload.id,listTilte:t.payload.listTilte,cards:[]},r=[].concat(Object(h.a)(e.data),[a]);return window.localStorage.setItem("my-task-mirror-state",JSON.stringify(r)),{data:r}},BOARD_ADDCARD_STATE:function(e,t){var a=e.data.find((function(e){return e.id===t.payload.listId}));if(window.console.log(a,"dasdas",t),a){var r={id:t.payload.id,cardTitle:t.payload.cardTitle,cardDes:t.payload.cardDes};a.cards=[].concat(Object(h.a)(a.cards),[r]);var n=e.data.map((function(e){return e.id===t.payload.listId?a:e}));return window.localStorage.setItem("my-task-mirror-state",JSON.stringify(n)),{data:n}}},BOARD_CLEAR_STATE:function(){return window.localStorage.setItem("my-task-mirror-state",""),{data:[]}},BOARD_SET_DEFAULT_STATE:function(){return{data:y}}},v),D=a(25),w=(a(232),a(34)),j=a(35),A=a(38),C=a(36),S=a(39),I=a(453),k=a(454),R=(a(162),a(52)),_=a(451),L=a(160),B=a(72),x=a(205),M=a(152),N=a(60),P=a.n(N),F=new(a(254))(P.a,{delayResponse:200}),H=Object(m.a)("BOARD_RESET_STATE"),J=Object(m.a)("BOARD_ADDLIST_STATE"),q=Object(m.a)("BOARD_ADDCARD_STATE"),U=Object(m.a)("BOARD_CLEAR_STATE"),W=Object(m.a)("BOARD_SET_DEFAULT_STATE"),z=[["GET","/board/data",200,{data:[]}],["POST","/board/list/add",200],["POST","/board/card/add",200],["POST","/board/delete",200],["POST","/board/reset",200]];F.onAny().reply((function(e){var t=z.shift(),a=Object(x.a)(t),r=a[0],n=a[1],o=a.slice(2);return e.url===n&&e.method.toUpperCase()===r?o:[200,{}]}));var G=a(450),X=a(456),K=a(457),Q=a(51),V=a(458),$=a(448),Y=a(449),Z=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(A.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(n)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){window.console.log(t,"lll"),e||(console.log("Received values of form: ",t),"Card"===a.props.itemType?a.props.addNewCard(t.title,t.des,a.props.listId):a.props.addNewList(t.title,t.des),a.setState({visible:!1}))})),a.props.form.resetFields()},a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a="Card"===this.props.itemType?n.a.createElement(X.a.Item,null,t("des",{rules:[{required:!1,message:"Please input Description!"}]})(n.a.createElement(K.a.TextArea,{rows:2,placeholder:"Description"}))):"";return n.a.createElement("div",null,n.a.createElement("center",null,n.a.createElement(Q.a,{type:"primary",size:"default",icon:"plus-circle",style:{margin:"10px"},onClick:this.showModal},"Add New ".concat(this.props.itemType))),n.a.createElement(V.a,{title:"Add ".concat(this.props.itemType),visible:this.state.visible,onCancel:function(){return e.setState({visible:!1})},footer:null},n.a.createElement(X.a,{onSubmit:this.handleSubmit},n.a.createElement(X.a.Item,null,t("title",{rules:[{required:!0,message:"Please input title"}]})(n.a.createElement(K.a,{placeholder:"Title"}))),a,n.a.createElement(X.a.Item,null,n.a.createElement($.a,{gutter:[0,3]},n.a.createElement(Y.a,{span:16}),n.a.createElement(Y.a,{span:4,style:{marginRight:"5"}},n.a.createElement(Q.a,{type:"primary",onClick:function(){return e.setState({visible:!1})}},"Cancel")),n.a.createElement(Y.a,{span:4},n.a.createElement(Q.a,{type:"primary",htmlType:"submit"},"Add")))))))}}]),t}(r.Component),ee=X.a.create()(Z),te=Object(c.b)((function(e){return{boardData:e.board.data}}),(function(e){return{addNewList:function(t){return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(M.uuid)();return function(a){P.a.post("/board/list/add").then((function(r){a(J({listTilte:e,id:t}))})).catch((function(r){a(J({listTilte:e,id:t}))}))}}(t))},addNewCard:function(t,a,r){return e(function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(M.uuid)();return function(n){window.console.log("comming addNew",e,t,a);P.a.post("/board/card/add").then((function(o){window.console.log("comming res addNew",e,t,a),n(q({cardTitle:e,cardDes:t,listId:a,id:r}))})).catch((function(o){n(q({cardTitle:e,cardDes:t,listId:a,id:r})),n(g(o))}))}}(t,a,r))}}}))(ee),ae=(a(400),function(e,t,a){var r=Array.from(e),n=r.splice(t,1),o=Object(L.a)(n,1)[0];return r.splice(a,0,o),r}),re=function(e,t){return Object(p.a)({userSelect:"none",padding:20,margin:"0 0 ".concat(10,"px 0"),background:e?"lightgreen":"white"},t)},ne=function(e){return{background:e?"green":"lightgrey",padding:10,width:200,minHeight:200,border:"0.5px solid",wordWrap:"break-word"}},oe=function(e,t,a,r){var n=Array.from(e),o=Array.from(t),i=n.splice(a.index,1),l=Object(L.a)(i,1)[0];o.splice(r.index,0,l);var c={};return c[a.droppableId]=n,c[r.droppableId]=o,c},ie=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(A.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(n)))).state={},a.getCardsArrayOfAList=function(e){return a.props.boardData.find((function(t){return t.id===e}))},a.onDragListEnd=function(e){window.console.log(e,"ada");var t=e.source,r=e.destination;if(r&&t.droppableId===r.droppableId){var n=ae(a.props.boardData,t.index,r.index);a.props.reorderCurrList(n)}},a.onDragEndHandler=function(e){window.console.log(e,"arrr");var t=e.destination,r=e.type;t&&("CARD"===r?a.onCardDragEnd(e):"LIST"===r&&a.onDragListEnd(e))},a.onCardDragEnd=function(e){var t=e.source,r=e.destination;if(window.console.log(e),r)if(t.droppableId===r.droppableId){window.console.log(a.getCardsArrayOfAList(t.droppableId));var n=a.getCardsArrayOfAList(t.droppableId),o=ae(a.getCardsArrayOfAList(t.droppableId)?a.getCardsArrayOfAList(t.droppableId).cards:[],t.index,r.index),i=Object(p.a)({},n,{cards:o});a.props.reorderCurrList(a.props.boardData.map((function(e){return e.id===t.droppableId?i:e})))}else{var l=a.getCardsArrayOfAList(t.droppableId),c=a.getCardsArrayOfAList(r.droppableId),d=oe(l.cards,c.cards,t,r),s=Object(p.a)({},l,{cards:d["".concat(t.droppableId)]}),u=Object(p.a)({},c,{cards:d["".concat(r.droppableId)]});a.props.reorderCurrList(a.props.boardData.map((function(e){return e.id===t.droppableId?s:e.id===r.droppableId?u:e})))}},a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{onDragEnd:this.onDragEndHandler},n.a.createElement(B.c,{droppableId:"droppable",direction:"horizontal",type:"LIST"},(function(t,a){return n.a.createElement("div",{ref:t.innerRef,style:(r=a.isDraggingOver,{background:r?"green":"lightgreen",padding:10,display:"flex",overflow:"auto"})},e.props.boardData.map((function(e,t){return n.a.createElement(B.b,{key:e.id,draggableId:e.id,index:t},(function(t,a){return n.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:re(a.isDragging,t.draggableProps.style)}),n.a.createElement(B.c,{droppableId:e.id,type:"CARD"},(function(t,a){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{ref:t.innerRef,style:ne(a.isDraggingOver)},n.a.createElement("span",null,n.a.createElement("center",null,e.listTilte)),e.cards.map((function(e,t){return n.a.createElement(B.b,{key:e.id,draggableId:e.id,index:t},(function(t,a){return n.a.createElement(G.a,{content:e.cardDes,title:e.cardTitle,trigger:"click"},n.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:re(a.isDragging,t.draggableProps.style)}),n.a.createElement("span",null,n.a.createElement("center",null,e.cardTitle))))}))})),t.placeholder),n.a.createElement(te,{itemType:"Card",listId:e.id}))})))}))})),t.placeholder,n.a.createElement(te,{itemType:"List"}));var r}))))}}]),t}(r.Component),le=Object(c.b)((function(e){return{boardData:e.board.data}}),(function(e){return{reorderCurrList:function(t){return e((a=t,function(e){return e(H({data:a})),window.localStorage.setItem("my-task-mirror-state",JSON.stringify(a)),Promise.resolve()}));var a}}}))(ie),ce=a(459),de=a(7),se=ce.a.SubMenu,ue=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(A.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(n)))).state={current:"list"},a.handleClick=function(e){a.setState({current:e.key})},a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(ce.a,{theme:"dark",onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal"},n.a.createElement(se,{title:n.a.createElement("span",null,n.a.createElement(de.a,{type:"book"}),"Task Mirror")}),n.a.createElement(se,{title:n.a.createElement("span",{onClick:function(){return e.props.clearBoardData()}},n.a.createElement(de.a,{type:"delete"}),"Clear Board")}),n.a.createElement(se,{title:n.a.createElement("span",{onClick:function(){return e.props.resetBoardData()}},n.a.createElement(de.a,{type:"undo"}),"Restore Default")})))}}]),t}(n.a.Component),pe=Object(c.b)((function(e){return{boardData:e.board.data}}),(function(e){return{clearBoardData:function(){return e((function(e){P.a.post("/board/delete").then((function(t){e(U())})).catch((function(t){e(U()),e(g(t))}))}))},resetBoardData:function(){return e((function(e){P.a.post("/board/reset").then((function(t){e(W())})).catch((function(t){e(W()),e(g(t))}))}))}}}))(ue),be=(a(440),_.a.Content),fe=function(e){function t(){return Object(w.a)(this,t),Object(A.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return this.renderWhenLoggedIn()}},{key:"renderWhenLoggedIn",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(_.a,null,n.a.createElement(pe,null),n.a.createElement(_.a,null,n.a.createElement(be,{style:{backgroundColor:"lightgreen",height:"600px"}},n.a.createElement(R.d,null,n.a.createElement(R.a,{exact:!0,from:"/",to:"/board/"}),n.a.createElement(R.a,{exact:!0,from:"/login",to:"/board/"}),n.a.createElement(R.b,{path:"/board/",exact:!0,component:le}))))))}}]),t}(r.Component),me=Object(c.b)((function(e){return{}}),(function(e){return{}}))(fe),ge=(a(442),function(e){return e.show?n.a.createElement("div",{styleName:"backdrop"}):null}),Ee=a(452),he=(a(443),function(){return n.a.createElement("div",null,n.a.createElement(ge,{show:!0}),n.a.createElement("div",{styleName:"spinner"},n.a.createElement(Ee.a,{tip:"Loading...",size:"large"})))}),Oe=(a(446),function(e){function t(){return Object(w.a)(this,t),Object(A.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.successMessage&&this.props.successMessage!==e.successMessage&&I.a.success({message:this.props.successMessage}),this.props.error&&this.props.error!==e.error)if(403===this.props.status)window.location.href="/board/",window.localStorage.clear();else{var t=null;try{t=JSON.parse(this.props.error_message)}catch(a){t=null}t?Object.keys(t).map((function(e){return k.a.error("".concat(e," : ").concat(t[e]))})):k.a.error("Something Wrong")}}},{key:"render",value:function(){var e=null;return(this.props.loading||this.props.loadingRequestCount>0)&&(e=n.a.createElement(he,null)),n.a.createElement("div",{styleName:"app"},n.a.createElement(s.a,null,n.a.createElement("div",null,n.a.createElement(me,null),e)))}}]),t}(r.Component)),ye=Object(c.b)((function(e){return{loading:e.global.loading,loadingRequestCount:e.global.loadingRequestCount,error:e.global.error,error_message:e.global.errorMessage,successMessage:e.global.successMessage,status:e.global.statusCode}}))(Oe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,Te=Object(D.a)(),De=Object(l.e)(Object(l.c)({global:E,board:T}),ve(Object(l.a)(d.a)));i.a.render(n.a.createElement(s.a,null,n.a.createElement(c.a,{store:De},n.a.createElement(ye,{history:Te}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[223,1,2]]]);
//# sourceMappingURL=main.c905aa59.chunk.js.map